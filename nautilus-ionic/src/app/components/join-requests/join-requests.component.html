<ion-content>

  <ion-segment [(ngModel)]="filters.requestType" (ionChange)="filterTypeChanged($event)">
    <ion-segment-button *ngFor="let reqType of requestTypes" [value]="reqType">
      <ion-label>{{ reqType }}</ion-label>
    </ion-segment-button>
  </ion-segment>


  <ion-accordion-group>
    <ion-accordion value="filters">
      <!-- Filter Accordion Header -->
      <ion-item slot="header">
        <ion-label>Filters</ion-label>
        <ion-icon name="options-outline" slot="end"></ion-icon>
      </ion-item>

      <!-- Filter Accordion Content -->
      <div slot="content">
        <ion-item>
          <ion-searchbar
            (ionInput)="filtersChanged($event)"
            placeholder="Search by name">
          </ion-searchbar>
        </ion-item>

        <ion-item>
          <ion-label>Status</ion-label>
          <ion-select (ionChange)="filtersChanged($event)">
            <ion-select-option value="">All</ion-select-option>
            <ion-select-option value="Pending">Pending</ion-select-option>
            <ion-select-option value="Approved">Approved</ion-select-option>
            <ion-select-option value="Rejected">Rejected</ion-select-option>
          </ion-select>
        </ion-item>
      </div>
    </ion-accordion>


      <!-- Request List Accordion Content -->
    <ion-grid>
      <ion-row>
        <ion-col size="6" *ngFor="let req of requestResponse.allRequests">
          <ion-card>
            <ion-card-header>
              <ion-card-title>
                <ion-icon  style="padding-right: 16px" [name]="getIcon(req)"></ion-icon>
                <ion-label>{{ getCardTitle(req) }}</ion-label>
              </ion-card-title>
              <ion-card-subtitle>
                <ion-icon style="padding-right: 16px" name="finger-print-outline"></ion-icon>
<!--                <ion-label [title]="getCardSubtitle(req)"></ion-label>-->
                <ion-label>{{'Request ID: ' + req.requestId }}</ion-label>
              </ion-card-subtitle>
            </ion-card-header>

            <ion-card-content>
              <div>
                <ion-chip [color]="getStatusColor(req.status)">
                  <ion-icon [name]="getStatusIcon(req.status)"></ion-icon>
                  <ion-label>{{ req.status }}</ion-label>
                </ion-chip>

                <ion-chip>
                  <ion-icon name="calendar-outline"></ion-icon>
                  <ion-label>{{ formatTimestamp(req.updatedAt) }}</ion-label>
                </ion-chip>
              </div>

              <div *ngIf="req.tags?.length">
                <strong>
                  <ion-icon name="pricetags-outline"></ion-icon> Tags:
                </strong>
                <ion-chip *ngFor="let tag of req.tags">
                  <ion-icon name="pricetag-outline"></ion-icon>
                  <ion-label>{{ tag }}</ion-label>
                </ion-chip>
              </div>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>


  </ion-accordion-group>


</ion-content>
